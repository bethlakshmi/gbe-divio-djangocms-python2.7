{% extends 'gbe/gbe_table.tmpl' %}
{% load gbe_tags %}
{% block title %}
   Act Tech Report
{% endblock %}
{% block before_table %}
  <h2 class="review-title gbe-title">{% if this_show %}Act Tech Info for {{this_show}}
  {% else %}Pick the Show{% endif %}</h2>
  <br/>
      {% include "conference_picker.tmpl" %}
  <br/>


  Also view:
  {% for show in all_shows %}
    <a href="{% url 'reporting:act_techinfo_review' show.eventitem_id%}">{{show}}</a>
    {% if not forloop.last %} | {% endif %}
  {% endfor %}
  
  {% if scheduling_link and scheduling_link|length > 0 %}
    <br><br>
    <a href="{{scheduling_link}}">Schedule Acts for this Show</a>
  {% endif %}
<br><br>
<span class="gbe-form-error">Highlighted text</span> reflects incomplete acts.<br>
<span class="gbe-form-error gbe-inactive">Bold and red names</span> reflects acts with
deactivated users.<br>

  {% if messages %}
      <script>
    alert("{% for message in messages %}{{message.tags|capfirst}}: {{message}}\n{% endfor %}");
      </script>
  {% endif %}
  {% endblock %}
  {% block tbody %}
    {% for act in acts %}
    <tr  class="gbe-table-row {% if not act.act.tech.is_complete  %}gbe-form-error{% endif %}" >
      <td>{% if act.order %}{{ act.order }}{% endif %}</td>
	    <td>{{ act.act.b_title }}</td>
	    <td>{% if not act.act.performer.contact.user_object.is_active  %}
        <span class="gbe-form-error gbe-inactive" class="bid-table">
        {% endif %}{{ act.act.performer }}
        {% if not act.act.performer.contact.user_object.is_active  %}- INACTIVE</span>
        {% endif %}<br>
        <a href='mailto:{{act.act.performer.contact.user_object.email}}' class="gbe-table-link">{{act.act.performer.contact.user_object.email}}</a></td>
	    <td>{% for rehearsal in act.rehearsals %}{{rehearsal.start_time}}<br>{%endfor%}</td>
      <td>{% if act.act.tech.track %}
            <a href="{{act.act.tech.track.url}}" class="gbe-table-link" >{{act.act.tech.track.name | display_track_title:20 }}</a>
          {% elif act.act.tech.confirm_no_music %}
            No audio track needed
          {% else %}
            <span class="gbe-form-error">No track provided</span>
          {% endif %}
          </td>
      <td><div class="btn-group">
    <a href="{% url 'reporting:act_techinfo_detail' act.act.pk%}" title="View Tech Info" class="btn gbe-btn-table btn-sm"><i class="fa fa-eye"></i></a>
  {% if act.act.video_link and act.act.video_choice != "1" %}
    <a href="{{ act.act.video_link }}" title="Watch Act Video" class="btn gbe-btn-table btn-sm"><i class="fas fa-video"></i></a>{% endif %}
	  {% if change_acts %}<a href="{% url 'gbe:act_tech_wizard' act.act.id%}" title="Edit Act Tech Info" class="btn gbe-btn-table btn-sm"><i class="icon-pencil"></i></a>
    <form action="{% url 'gbe:act_changestate' act.act.id%}" method="post">
      {% csrf_token %}
      <input type="hidden" id="id_accepted" name="accepted" value="4">
      <input type="hidden" id="id_next" name="next" value="{{ request.get_full_path }}">
    <button title="Remove Act from Show" type="submit" class="btn gbe-btn-table btn-sm">
        <i class="icon-trash"></i></button></form>{% endif %}</div>
	  </td>
      </tr>
  {% endfor %}
{% endblock %}
{% block after_table %}
  {% if not acts %}
    <br>
    There are no available acts.  That may mean that:
    <ul>
    <li>The show has not been scheduled - check the scheduler</li>
    <li>There are no acts in the show - check bid review for acts</li>
    <li>The show identified does not exist - please pick from the list above...</li>
    </ul>
{% endif %}{% endblock %}
